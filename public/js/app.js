/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.l = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// identity function for calling harmory imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };

/******/ 	// define getter function for harmory exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		Object.defineProperty(exports, name, {
/******/ 			configurable: false,
/******/ 			enumerable: true,
/******/ 			get: getter
/******/ 		});
/******/ 	};

/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};

/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

"use strict";
eval("'use strict';\n\n$(document).ready(function($) {\n    \n\n    function __log(e, data) {\n        console.log(e + \" \" + (data || ''));\n    }\n\n    var audio_context;\n    var recorder;\n    var recording = false;\n    var $form = $('form');\n    var currAudioBlob = null;\n    var $form = $(\"form\");\n    var $submitButton = $(\"#submit\");\n    var token = $('meta[name=\"csrf_token\"]').attr('content')\n    $submitButton.hide();\n\n    $('#file-upload').change(function(event) {\n        $submitButton.show();\n    });\n    $('.delete-recording').click(function(event) {\n        event.preventDefault();\n        var id = $(this).data('id');\n        var data = {_method: 'DELETE', '_token': token};\n        var $el = $('.recording-'+id);\n        $.ajax({\n            url: '/recordings/'+id,\n            type: 'POST',\n            dataType: 'json',\n            data: data,\n        })\n        .done(function(e) {\n            if(e.status > 200) {\n                $el.fadeTo(200, 0, function() {\n                 $(this).remove();   \n                });\n            }\n        })\n        .fail(function() {\n            console.log(\"error\");\n        })\n        .always(function() {\n            console.log(\"complete\");\n        });\n        \n    });\n    $form.submit(function( event ) {\n        event.preventDefault();\n        console.log(\"Post Recording\");\n        if(!currAudioBlob && $('#file-upload').val() == \"\") {\n            console.log(\"Missing recording\");\n            return;            \n        }\n        var data = new FormData($('form')[0]);\n        if(currAudioBlob) {\n            var blob = new Blob([currAudioBlob], {type: \"audio/wav\"});\n            data.append('audio_name', moment().format('x')+\"_audio.wav\");\n            data.append('audio_file', blob);\n        }\n        $.ajax({\n            url: '/submit',\n            type: 'POST',\n            dataType: 'json',\n            data: data,\n            processData: false,\n            contentType: false\n        })\n        .done(function(e) {\n            console.log(\"success\", e);\n            if(e.status > 200) {\n                document.location = '/';\n            }\n        })\n        .fail(function() {\n            console.log(\"error\");\n        })\n        .always(function() {\n            console.log(\"complete\");\n        });\n    });\n\n    // ------------------------------------------------------------------------\n    function startUserMedia(stream) {\n        var input = audio_context.createMediaStreamSource(stream);\n         __log('Media stream created.');\n\n        // Uncomment if you want the audio to feedback directly\n        //input.connect(audio_context.destination);\n        //__log('Input connected to audio context destination.');\n    \n        recorder = new Recorder(input);\n        __log('Recorder initialised.');\n    }\n\n    // ------------------------------------------------------------------------\n    try {\n        \n        // webkit shim\n        window.AudioContext = window.AudioContext || window.webkitAudioContext;\n        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia;\n        window.URL = window.URL || window.webkitURL;\n      \n        audio_context = new AudioContext;\n\n        __log('Audio context set up.');\n        __log('navigator.getUserMedia ' + (navigator.getUserMedia ? 'available.' : 'not present!'));\n    } catch (e) {\n        console.log(\"e: \", e)\n    }\n    \n    navigator.getUserMedia({audio: true}, startUserMedia, function(e) {\n        console.log('No live audio input: ', e);\n    });\n\n    // ------------------------------------------------------------------------\n    var isRecording = false;\n    var $recordButton = $('#recording');\n    $recordButton.click(function(event) {\n        event.preventDefault();\n        console.log(currAudioBlob);\n        // start recording\n        if(!isRecording) {\n            isRecording = true;\n            recorder && recorder.record();\n            __log('Recording...');\n            $(this).html(\"Stop Recording\");\n        }\n\n        // stop recording\n        else {\n            isRecording = false;   \n            $(this).html(currAudioBlob ? \"Re-Record\" : \"Start Recording\");\n            \n            // stop\n            recorder && recorder.stop();\n            __log('Stopped recording.');\n            if(currAudioBlob) {\n                $submitButton.show();\n            }\n            submitOrRerecord();\n        }\n    });\n\n    // ------------------------------------------------------------------------\n    function submitOrRerecord() {\n\n        recorder && recorder.exportWAV(function(blob) {\n\n            currAudioBlob = blob;\n            console.log(\"audio blob!\");\n\n            var sound_url = URL.createObjectURL(currAudioBlob);\n            var audio_elt = document.createElement('audio');\n            audio_elt.controls = true;\n            audio_elt.src = sound_url;\n            audio_elt.setAttribute('data-question', $(\".record\").attr('data-question'));\n\n\n            $('#recording-col').html( $(audio_elt) );\n            $recordButton.html(currAudioBlob ? \"Re-Record\" : \"Start Recording\");\n            if(currAudioBlob) {\n                $submitButton.show();\n            }\n            recorder.clear();\n        });\n  }\n\n});\n\n/*\n\n\n\n\n\n\n\n\n  function __log(e, data) {\n    console.log(e + \" \" + (data || ''));\n  }\n\n  var audio_context;\n  var recorder;\n  var recording=false;\n\n  function startUserMedia(stream) {\n    var input = audio_context.createMediaStreamSource(stream);\n    __log('Media stream created.');\n\n    // Uncomment if you want the audio to feedback directly\n    //input.connect(audio_context.destination);\n    //__log('Input connected to audio context destination.');\n    \n    recorder = new Recorder(input);\n    __log('Recorder initialised.');\n  }\n\nfunction toggleRecord(ev){\n    var btn = $(ev.target);\n    var spanverbiage = $(ev.target).parent().children('span').first();\n         if(btn.hasClass('notRec')){\n\n                 btn.removeClass(\"notRec\");\n                 btn.addClass(\"Rec\");\n                 // start recording now!\n                 spanverbiage.html(\"Stop\");\n                 recording = true;\n                 recorder && recorder.record();\n\n                 __log('Recording...');\n             } else {\n                 btn.removeClass(\"Rec\");\n                 btn.addClass(\"notRec\");\n\n                 spanverbiage.html(\"Re-Record\");\n\n                  // stop\n                 recording = false;\n                 recorder && recorder.stop();\n\n                 __log('Stopped recording.');\n                 // create WAV download link using audio data blob\n                 submitOrRerecord();\n\n             }\n\n     }\n     */\n\n/*\nvar Screensaver = require('./screensaver.js');\n\n$(function() {\n    /// dis nasty but trying to move fast here\n    var currAudioBlob;\n\n   //intro slide - only show 'let's go' when we're dang ready\n   var nameField = false\n   var emailField = false;\n   function testFields(keycode) { if (nameField && emailField) { \n    $(\".info button.hidden\").removeClass(\"hidden\");\n    if(keycode == 13) {\n        $.deck('next');\n    }\n    }}\n   $(\"#name-input\").keyup(function(){\n    nameField = true;\n    testFields(e.keyCode);\n   });\n   $(\"#email-input\").keyup(function(e){\n    emailField = true;\n    testFields(e.keyCode);\n   });\n   $(document).keyup(function(e) {\n     if(e.keyCode == 27) {\n        $(\"#terms\").addClass(\"hidden\");\n     }\n   })\n\n\n  \n\n    \n    $(document).bind('deck.change', function(event, from, to) {\n\t   console.log('Moving from slide ' + from + ' to ' + to);\n\n        // submit full data packets on the 'thanks' slide\n        if( $(\".deck-next\").hasClass('thanks')) {\n            // attempt to submit data\n            var question_attr = $(\".thanks.deck-next\").attr(\"data-question\");\n\n            var audio_blob = currAudioBlob;//$(\"audio[data-question='\"+question_attr+\"'\").attr('src');\n\n\n\n            var dataPacket = new FormData();\n\n            dataPacket.append('question', $(\".question[data-question='\"+question_attr+\"'] p.question-str\").html());\n            dataPacket.append('question_id', question_attr.substring(8,9));\n\n            var response = $(\"#\"+question_attr).val();\n            if (response == undefined) { response = '50'; }\n            dataPacket.append('response', response);\n\n\n            var question_care = $(\"#\"+question_attr+\"_care\").val();\n            if (question_care == undefined) { question_care = '50'; }            \n            dataPacket.append('strength', question_care);\n\n\n            dataPacket.append('csrf_token', $('meta[name=\"csrf_token\"]').attr('content'));\n            var name = ($(\"#name-input\").val().length == 0) ? \"No name given\" : $(\"#name-input\").val();\n            dataPacket.append('name', name);\n            var email = ($(\"#email-input\").val().length == 0) ? \"No@email.address\" : $(\"#email-input\").val();\n            dataPacket.append('email', email);\n            console.log(audio_blob);\n            dataPacket.append('audio_name', moment().format('x')+\"_audio.wav\");\n            dataPacket.append('audio_file', audio_blob);\n\n            // var dataPacket = {\n            //     'timestamp': moment().format('MM/DD/YYYY HH:mm:ss a'),\n            //     'question': $(\".question[data-question='\"+question_attr+\"'] p.question-str\").html(),\n            //     'question_id': question_attr.substring(8,9),\n            //     'response': $(\"#\"+question_attr).val(),\n            //     'strength': $(\"#\"+question_attr+\"_care\").val(),\n            //     'audio_file': audio_blob,\n            //     'name': $(\"#name-input\").val(),\n            //     'email': $(\"#email-input\").val()\n            // };\n\n            console.log(dataPacket);\n\n\n            $.ajax({\n                url: '/submit',\n                type: 'POST',\n                dataType: 'json',\n                data: dataPacket,\n                processData: false,\n                contentType: false\n               \n            })\n            .done(function(data, status, xhr) {\n                console.log(\"SUCCESS\");\n                console.log(\"data\", data);\n                console.log(\"status\", status);\n                console.log(\"xhr\", xhr);\n                console.log(\"-----------\");\n            })\n            .fail(function() {\n                console.log(\"error\");\n            })\n            .always(function(xhr, status) {\n                console.log(\"COMPLETE\");\n                console.log(\"status\", status);\n                console.log(\"xhr\", xhr);\n                console.log(\"-----------\");\n            });\n\n\n    \n        }\n\n\n        if( $(\".deck-next\").hasClass('autoplay')) {\n            setTimeout(function(){\n                if ( $(\".deck-current\").hasClass('autoplay') ){\n                    $.deck('next'); \n                }\n            }, 1200);\n        }\n\n        if( $(\".deck-next\").hasClass('done')) {\n            setTimeout(function(){\n                if ( $(\".deck-current\").hasClass('done') ){\n                    \n                    window.location.href = \"/\";\n                }\n            }, 5200);\n        }\n\n\t});\n\n\n\n    //todo - turn off arrow listeners on slideshow\n    //todo - hammerjs that ish\n\n\n    /////////////\n    // record stuff\n    /////////\n\n    try {\n      // webkit shim\n      window.AudioContext = window.AudioContext || window.webkitAudioContext;\n      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia;\n      window.URL = window.URL || window.webkitURL;\n      \n      audio_context = new AudioContext;\n\n      __log('Audio context set up.');\n      __log('navigator.getUserMedia ' + (navigator.getUserMedia ? 'available.' : 'not present!'));\n    } catch (e) {\n        console.log(\"e: \", e)\n    }\n    \n    navigator.getUserMedia({audio: true}, startUserMedia, function(e) {\n      console.log('No live audio input: ', e);\n    });\n\n\n\n\n\n\n  function __log(e, data) {\n    console.log(e + \" \" + (data || ''));\n  }\n\n  var audio_context;\n  var recorder;\n  var recording=false;\n\n  function startUserMedia(stream) {\n    var input = audio_context.createMediaStreamSource(stream);\n    __log('Media stream created.');\n\n    // Uncomment if you want the audio to feedback directly\n    //input.connect(audio_context.destination);\n    //__log('Input connected to audio context destination.');\n    \n    recorder = new Recorder(input);\n    __log('Recorder initialised.');\n  }\n\nfunction toggleRecord(ev){\n    var btn = $(ev.target);\n    var spanverbiage = $(ev.target).parent().children('span').first();\n         if(btn.hasClass('notRec')){\n\n                 btn.removeClass(\"notRec\");\n                 btn.addClass(\"Rec\");\n                 // start recording now!\n                 spanverbiage.html(\"Stop\");\n                 recording = true;\n                 recorder && recorder.record();\n\n                 __log('Recording...');\n             } else {\n                 btn.removeClass(\"Rec\");\n                 btn.addClass(\"notRec\");\n\n                 spanverbiage.html(\"Re-Record\");\n\n                  // stop\n                 recording = false;\n                 recorder && recorder.stop();\n\n                 __log('Stopped recording.');\n                 // create WAV download link using audio data blob\n                 submitOrRerecord();\n\n             }\n\n     }\n\n  //  var recordButton = $('.recorder-button button');\n   //   // record button clickers\n     // recordButton.each(function(){\n     //     var $this = $(this);\n     //     var $spanVerbiage = $(this).parent().find('span').first();\n     //     var mc = new Hammer(this);\n     //     mc.on(\"tap\", function() {\n     //         if($this.hasClass('notRec')){\n\n     //             $this.removeClass(\"notRec\");\n     //             $this.addClass(\"Rec\");\n     //             // start recording now!\n     //             $spanVerbiage.html(\"Stop\");\n     //             recording = true;\n     //             recorder && recorder.record();\n\n     //             __log('Recording...');\n     //         } else {\n     //             $this.removeClass(\"Rec\");\n     //             $this.addClass(\"notRec\");\n\n     //             $spanVerbiage.html(\"Re-Record\");\n\n     //              // stop\n     //             recording = false;\n     //             recorder && recorder.stop();\n\n     //             __log('Stopped recording.');\n     //             // create WAV download link using audio data blob\n     //             submitOrRerecord();\n\n     //         }\n     //     });\n     // });\n\n\n\n  function submitOrRerecord() {\n    console.log(\"hey man!\");\n    console.log(recorder);\n\n    recorder && recorder.exportWAV(function(blob) {\n      currAudioBlob = blob;\n      console.log(\"audio blob!\");\n\n      var thisQuestion = $(\".record.deck-current\").attr('data-question');\n\n      var sound_url = URL.createObjectURL(currAudioBlob);\n      var audio_elt = document.createElement('audio');\n      audio_elt.controls = true;\n      audio_elt.src = sound_url;\n      audio_elt.setAttribute('data-question', $(\".record\").attr('data-question'));\n\n      console.log(thisQuestion);\n      var currQuestionsPlayer = $(\".record[data-question='\"+thisQuestion+\"'] .playMostRecent\");\n      currQuestionsPlayer.html(\"\");\n      currQuestionsPlayer.append( $(audio_elt) );\n     // currQuestionsPlayer.append($(audio_link));\n\n      currQuestionsPlayer.find(\"audio\").attr(\"data-question\", thisQuestion);\n\n\n      $(\".deck-current.record button.next\").removeClass(\"hidden\");\n\n        recorder.clear();\n\n    });\n  }\n\n\n\n\n});*///# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL2FwcC5qcz84YjY3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuICAgIFxuXG4gICAgZnVuY3Rpb24gX19sb2coZSwgZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlICsgXCIgXCIgKyAoZGF0YSB8fCAnJykpO1xuICAgIH1cblxuICAgIHZhciBhdWRpb19jb250ZXh0O1xuICAgIHZhciByZWNvcmRlcjtcbiAgICB2YXIgcmVjb3JkaW5nID0gZmFsc2U7XG4gICAgdmFyICRmb3JtID0gJCgnZm9ybScpO1xuICAgIHZhciBjdXJyQXVkaW9CbG9iID0gbnVsbDtcbiAgICB2YXIgJGZvcm0gPSAkKFwiZm9ybVwiKTtcbiAgICB2YXIgJHN1Ym1pdEJ1dHRvbiA9ICQoXCIjc3VibWl0XCIpO1xuICAgIHZhciB0b2tlbiA9ICQoJ21ldGFbbmFtZT1cImNzcmZfdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAkc3VibWl0QnV0dG9uLmhpZGUoKTtcblxuICAgICQoJyNmaWxlLXVwbG9hZCcpLmNoYW5nZShmdW5jdGlvbihldmVudCkge1xuICAgICAgICAkc3VibWl0QnV0dG9uLnNob3coKTtcbiAgICB9KTtcbiAgICAkKCcuZGVsZXRlLXJlY29yZGluZycpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpZCA9ICQodGhpcykuZGF0YSgnaWQnKTtcbiAgICAgICAgdmFyIGRhdGEgPSB7X21ldGhvZDogJ0RFTEVURScsICdfdG9rZW4nOiB0b2tlbn07XG4gICAgICAgIHZhciAkZWwgPSAkKCcucmVjb3JkaW5nLScraWQpO1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnL3JlY29yZGluZ3MvJytpZCxcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZihlLnN0YXR1cyA+IDIwMCkge1xuICAgICAgICAgICAgICAgICRlbC5mYWRlVG8oMjAwLCAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTsgICBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xuICAgICAgICB9KVxuICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb21wbGV0ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH0pO1xuICAgICRmb3JtLnN1Ym1pdChmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUG9zdCBSZWNvcmRpbmdcIik7XG4gICAgICAgIGlmKCFjdXJyQXVkaW9CbG9iICYmICQoJyNmaWxlLXVwbG9hZCcpLnZhbCgpID09IFwiXCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyByZWNvcmRpbmdcIik7XG4gICAgICAgICAgICByZXR1cm47ICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoJCgnZm9ybScpWzBdKTtcbiAgICAgICAgaWYoY3VyckF1ZGlvQmxvYikge1xuICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY3VyckF1ZGlvQmxvYl0sIHt0eXBlOiBcImF1ZGlvL3dhdlwifSk7XG4gICAgICAgICAgICBkYXRhLmFwcGVuZCgnYXVkaW9fbmFtZScsIG1vbWVudCgpLmZvcm1hdCgneCcpK1wiX2F1ZGlvLndhdlwiKTtcbiAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdhdWRpb19maWxlJywgYmxvYik7XG4gICAgICAgIH1cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogJy9zdWJtaXQnLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWNjZXNzXCIsIGUpO1xuICAgICAgICAgICAgaWYoZS5zdGF0dXMgPiAyMDApIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbiA9ICcvJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xuICAgICAgICB9KVxuICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb21wbGV0ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBzdGFydFVzZXJNZWRpYShzdHJlYW0pIHtcbiAgICAgICAgdmFyIGlucHV0ID0gYXVkaW9fY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xuICAgICAgICAgX19sb2coJ01lZGlhIHN0cmVhbSBjcmVhdGVkLicpO1xuXG4gICAgICAgIC8vIFVuY29tbWVudCBpZiB5b3Ugd2FudCB0aGUgYXVkaW8gdG8gZmVlZGJhY2sgZGlyZWN0bHlcbiAgICAgICAgLy9pbnB1dC5jb25uZWN0KGF1ZGlvX2NvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICAvL19fbG9nKCdJbnB1dCBjb25uZWN0ZWQgdG8gYXVkaW8gY29udGV4dCBkZXN0aW5hdGlvbi4nKTtcbiAgICBcbiAgICAgICAgcmVjb3JkZXIgPSBuZXcgUmVjb3JkZXIoaW5wdXQpO1xuICAgICAgICBfX2xvZygnUmVjb3JkZXIgaW5pdGlhbGlzZWQuJyk7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdHJ5IHtcbiAgICAgICAgXG4gICAgICAgIC8vIHdlYmtpdCBzaGltXG4gICAgICAgIHdpbmRvdy5BdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7XG4gICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWE7XG4gICAgICAgIHdpbmRvdy5VUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7XG4gICAgICBcbiAgICAgICAgYXVkaW9fY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQ7XG5cbiAgICAgICAgX19sb2coJ0F1ZGlvIGNvbnRleHQgc2V0IHVwLicpO1xuICAgICAgICBfX2xvZygnbmF2aWdhdG9yLmdldFVzZXJNZWRpYSAnICsgKG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPyAnYXZhaWxhYmxlLicgOiAnbm90IHByZXNlbnQhJykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJlOiBcIiwgZSlcbiAgICB9XG4gICAgXG4gICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSh7YXVkaW86IHRydWV9LCBzdGFydFVzZXJNZWRpYSwgZnVuY3Rpb24oZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTm8gbGl2ZSBhdWRpbyBpbnB1dDogJywgZSk7XG4gICAgfSk7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICB2YXIgaXNSZWNvcmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgJHJlY29yZEJ1dHRvbiA9ICQoJyNyZWNvcmRpbmcnKTtcbiAgICAkcmVjb3JkQnV0dG9uLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJBdWRpb0Jsb2IpO1xuICAgICAgICAvLyBzdGFydCByZWNvcmRpbmdcbiAgICAgICAgaWYoIWlzUmVjb3JkaW5nKSB7XG4gICAgICAgICAgICBpc1JlY29yZGluZyA9IHRydWU7XG4gICAgICAgICAgICByZWNvcmRlciAmJiByZWNvcmRlci5yZWNvcmQoKTtcbiAgICAgICAgICAgIF9fbG9nKCdSZWNvcmRpbmcuLi4nKTtcbiAgICAgICAgICAgICQodGhpcykuaHRtbChcIlN0b3AgUmVjb3JkaW5nXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3RvcCByZWNvcmRpbmdcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpc1JlY29yZGluZyA9IGZhbHNlOyAgIFxuICAgICAgICAgICAgJCh0aGlzKS5odG1sKGN1cnJBdWRpb0Jsb2IgPyBcIlJlLVJlY29yZFwiIDogXCJTdGFydCBSZWNvcmRpbmdcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHN0b3BcbiAgICAgICAgICAgIHJlY29yZGVyICYmIHJlY29yZGVyLnN0b3AoKTtcbiAgICAgICAgICAgIF9fbG9nKCdTdG9wcGVkIHJlY29yZGluZy4nKTtcbiAgICAgICAgICAgIGlmKGN1cnJBdWRpb0Jsb2IpIHtcbiAgICAgICAgICAgICAgICAkc3VibWl0QnV0dG9uLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1Ym1pdE9yUmVyZWNvcmQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgZnVuY3Rpb24gc3VibWl0T3JSZXJlY29yZCgpIHtcblxuICAgICAgICByZWNvcmRlciAmJiByZWNvcmRlci5leHBvcnRXQVYoZnVuY3Rpb24oYmxvYikge1xuXG4gICAgICAgICAgICBjdXJyQXVkaW9CbG9iID0gYmxvYjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYXVkaW8gYmxvYiFcIik7XG5cbiAgICAgICAgICAgIHZhciBzb3VuZF91cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGN1cnJBdWRpb0Jsb2IpO1xuICAgICAgICAgICAgdmFyIGF1ZGlvX2VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICBhdWRpb19lbHQuY29udHJvbHMgPSB0cnVlO1xuICAgICAgICAgICAgYXVkaW9fZWx0LnNyYyA9IHNvdW5kX3VybDtcbiAgICAgICAgICAgIGF1ZGlvX2VsdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcXVlc3Rpb24nLCAkKFwiLnJlY29yZFwiKS5hdHRyKCdkYXRhLXF1ZXN0aW9uJykpO1xuXG5cbiAgICAgICAgICAgICQoJyNyZWNvcmRpbmctY29sJykuaHRtbCggJChhdWRpb19lbHQpICk7XG4gICAgICAgICAgICAkcmVjb3JkQnV0dG9uLmh0bWwoY3VyckF1ZGlvQmxvYiA/IFwiUmUtUmVjb3JkXCIgOiBcIlN0YXJ0IFJlY29yZGluZ1wiKTtcbiAgICAgICAgICAgIGlmKGN1cnJBdWRpb0Jsb2IpIHtcbiAgICAgICAgICAgICAgICAkc3VibWl0QnV0dG9uLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY29yZGVyLmNsZWFyKCk7XG4gICAgICAgIH0pO1xuICB9XG5cbn0pO1xuXG4vKlxuXG5cblxuXG5cblxuXG5cbiAgZnVuY3Rpb24gX19sb2coZSwgZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKGUgKyBcIiBcIiArIChkYXRhIHx8ICcnKSk7XG4gIH1cblxuICB2YXIgYXVkaW9fY29udGV4dDtcbiAgdmFyIHJlY29yZGVyO1xuICB2YXIgcmVjb3JkaW5nPWZhbHNlO1xuXG4gIGZ1bmN0aW9uIHN0YXJ0VXNlck1lZGlhKHN0cmVhbSkge1xuICAgIHZhciBpbnB1dCA9IGF1ZGlvX2NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTtcbiAgICBfX2xvZygnTWVkaWEgc3RyZWFtIGNyZWF0ZWQuJyk7XG5cbiAgICAvLyBVbmNvbW1lbnQgaWYgeW91IHdhbnQgdGhlIGF1ZGlvIHRvIGZlZWRiYWNrIGRpcmVjdGx5XG4gICAgLy9pbnB1dC5jb25uZWN0KGF1ZGlvX2NvbnRleHQuZGVzdGluYXRpb24pO1xuICAgIC8vX19sb2coJ0lucHV0IGNvbm5lY3RlZCB0byBhdWRpbyBjb250ZXh0IGRlc3RpbmF0aW9uLicpO1xuICAgIFxuICAgIHJlY29yZGVyID0gbmV3IFJlY29yZGVyKGlucHV0KTtcbiAgICBfX2xvZygnUmVjb3JkZXIgaW5pdGlhbGlzZWQuJyk7XG4gIH1cblxuZnVuY3Rpb24gdG9nZ2xlUmVjb3JkKGV2KXtcbiAgICB2YXIgYnRuID0gJChldi50YXJnZXQpO1xuICAgIHZhciBzcGFudmVyYmlhZ2UgPSAkKGV2LnRhcmdldCkucGFyZW50KCkuY2hpbGRyZW4oJ3NwYW4nKS5maXJzdCgpO1xuICAgICAgICAgaWYoYnRuLmhhc0NsYXNzKCdub3RSZWMnKSl7XG5cbiAgICAgICAgICAgICAgICAgYnRuLnJlbW92ZUNsYXNzKFwibm90UmVjXCIpO1xuICAgICAgICAgICAgICAgICBidG4uYWRkQ2xhc3MoXCJSZWNcIik7XG4gICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHJlY29yZGluZyBub3chXG4gICAgICAgICAgICAgICAgIHNwYW52ZXJiaWFnZS5odG1sKFwiU3RvcFwiKTtcbiAgICAgICAgICAgICAgICAgcmVjb3JkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgcmVjb3JkZXIgJiYgcmVjb3JkZXIucmVjb3JkKCk7XG5cbiAgICAgICAgICAgICAgICAgX19sb2coJ1JlY29yZGluZy4uLicpO1xuICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVDbGFzcyhcIlJlY1wiKTtcbiAgICAgICAgICAgICAgICAgYnRuLmFkZENsYXNzKFwibm90UmVjXCIpO1xuXG4gICAgICAgICAgICAgICAgIHNwYW52ZXJiaWFnZS5odG1sKFwiUmUtUmVjb3JkXCIpO1xuXG4gICAgICAgICAgICAgICAgICAvLyBzdG9wXG4gICAgICAgICAgICAgICAgIHJlY29yZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICByZWNvcmRlciAmJiByZWNvcmRlci5zdG9wKCk7XG5cbiAgICAgICAgICAgICAgICAgX19sb2coJ1N0b3BwZWQgcmVjb3JkaW5nLicpO1xuICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgV0FWIGRvd25sb2FkIGxpbmsgdXNpbmcgYXVkaW8gZGF0YSBibG9iXG4gICAgICAgICAgICAgICAgIHN1Ym1pdE9yUmVyZWNvcmQoKTtcblxuICAgICAgICAgICAgIH1cblxuICAgICB9XG4gICAgICovXG5cbi8qXG52YXIgU2NyZWVuc2F2ZXIgPSByZXF1aXJlKCcuL3NjcmVlbnNhdmVyLmpzJyk7XG5cbiQoZnVuY3Rpb24oKSB7XG4gICAgLy8vIGRpcyBuYXN0eSBidXQgdHJ5aW5nIHRvIG1vdmUgZmFzdCBoZXJlXG4gICAgdmFyIGN1cnJBdWRpb0Jsb2I7XG5cbiAgIC8vaW50cm8gc2xpZGUgLSBvbmx5IHNob3cgJ2xldCdzIGdvJyB3aGVuIHdlJ3JlIGRhbmcgcmVhZHlcbiAgIHZhciBuYW1lRmllbGQgPSBmYWxzZVxuICAgdmFyIGVtYWlsRmllbGQgPSBmYWxzZTtcbiAgIGZ1bmN0aW9uIHRlc3RGaWVsZHMoa2V5Y29kZSkgeyBpZiAobmFtZUZpZWxkICYmIGVtYWlsRmllbGQpIHsgXG4gICAgJChcIi5pbmZvIGJ1dHRvbi5oaWRkZW5cIikucmVtb3ZlQ2xhc3MoXCJoaWRkZW5cIik7XG4gICAgaWYoa2V5Y29kZSA9PSAxMykge1xuICAgICAgICAkLmRlY2soJ25leHQnKTtcbiAgICB9XG4gICAgfX1cbiAgICQoXCIjbmFtZS1pbnB1dFwiKS5rZXl1cChmdW5jdGlvbigpe1xuICAgIG5hbWVGaWVsZCA9IHRydWU7XG4gICAgdGVzdEZpZWxkcyhlLmtleUNvZGUpO1xuICAgfSk7XG4gICAkKFwiI2VtYWlsLWlucHV0XCIpLmtleXVwKGZ1bmN0aW9uKGUpe1xuICAgIGVtYWlsRmllbGQgPSB0cnVlO1xuICAgIHRlc3RGaWVsZHMoZS5rZXlDb2RlKTtcbiAgIH0pO1xuICAgJChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24oZSkge1xuICAgICBpZihlLmtleUNvZGUgPT0gMjcpIHtcbiAgICAgICAgJChcIiN0ZXJtc1wiKS5hZGRDbGFzcyhcImhpZGRlblwiKTtcbiAgICAgfVxuICAgfSlcblxuXG4gIFxuXG4gICAgXG4gICAgJChkb2N1bWVudCkuYmluZCgnZGVjay5jaGFuZ2UnLCBmdW5jdGlvbihldmVudCwgZnJvbSwgdG8pIHtcblx0ICAgY29uc29sZS5sb2coJ01vdmluZyBmcm9tIHNsaWRlICcgKyBmcm9tICsgJyB0byAnICsgdG8pO1xuXG4gICAgICAgIC8vIHN1Ym1pdCBmdWxsIGRhdGEgcGFja2V0cyBvbiB0aGUgJ3RoYW5rcycgc2xpZGVcbiAgICAgICAgaWYoICQoXCIuZGVjay1uZXh0XCIpLmhhc0NsYXNzKCd0aGFua3MnKSkge1xuICAgICAgICAgICAgLy8gYXR0ZW1wdCB0byBzdWJtaXQgZGF0YVxuICAgICAgICAgICAgdmFyIHF1ZXN0aW9uX2F0dHIgPSAkKFwiLnRoYW5rcy5kZWNrLW5leHRcIikuYXR0cihcImRhdGEtcXVlc3Rpb25cIik7XG5cbiAgICAgICAgICAgIHZhciBhdWRpb19ibG9iID0gY3VyckF1ZGlvQmxvYjsvLyQoXCJhdWRpb1tkYXRhLXF1ZXN0aW9uPSdcIitxdWVzdGlvbl9hdHRyK1wiJ1wiKS5hdHRyKCdzcmMnKTtcblxuXG5cbiAgICAgICAgICAgIHZhciBkYXRhUGFja2V0ID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgICAgICAgIGRhdGFQYWNrZXQuYXBwZW5kKCdxdWVzdGlvbicsICQoXCIucXVlc3Rpb25bZGF0YS1xdWVzdGlvbj0nXCIrcXVlc3Rpb25fYXR0citcIiddIHAucXVlc3Rpb24tc3RyXCIpLmh0bWwoKSk7XG4gICAgICAgICAgICBkYXRhUGFja2V0LmFwcGVuZCgncXVlc3Rpb25faWQnLCBxdWVzdGlvbl9hdHRyLnN1YnN0cmluZyg4LDkpKTtcblxuICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gJChcIiNcIitxdWVzdGlvbl9hdHRyKS52YWwoKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PSB1bmRlZmluZWQpIHsgcmVzcG9uc2UgPSAnNTAnOyB9XG4gICAgICAgICAgICBkYXRhUGFja2V0LmFwcGVuZCgncmVzcG9uc2UnLCByZXNwb25zZSk7XG5cblxuICAgICAgICAgICAgdmFyIHF1ZXN0aW9uX2NhcmUgPSAkKFwiI1wiK3F1ZXN0aW9uX2F0dHIrXCJfY2FyZVwiKS52YWwoKTtcbiAgICAgICAgICAgIGlmIChxdWVzdGlvbl9jYXJlID09IHVuZGVmaW5lZCkgeyBxdWVzdGlvbl9jYXJlID0gJzUwJzsgfSAgICAgICAgICAgIFxuICAgICAgICAgICAgZGF0YVBhY2tldC5hcHBlbmQoJ3N0cmVuZ3RoJywgcXVlc3Rpb25fY2FyZSk7XG5cblxuICAgICAgICAgICAgZGF0YVBhY2tldC5hcHBlbmQoJ2NzcmZfdG9rZW4nLCAkKCdtZXRhW25hbWU9XCJjc3JmX3Rva2VuXCJdJykuYXR0cignY29udGVudCcpKTtcbiAgICAgICAgICAgIHZhciBuYW1lID0gKCQoXCIjbmFtZS1pbnB1dFwiKS52YWwoKS5sZW5ndGggPT0gMCkgPyBcIk5vIG5hbWUgZ2l2ZW5cIiA6ICQoXCIjbmFtZS1pbnB1dFwiKS52YWwoKTtcbiAgICAgICAgICAgIGRhdGFQYWNrZXQuYXBwZW5kKCduYW1lJywgbmFtZSk7XG4gICAgICAgICAgICB2YXIgZW1haWwgPSAoJChcIiNlbWFpbC1pbnB1dFwiKS52YWwoKS5sZW5ndGggPT0gMCkgPyBcIk5vQGVtYWlsLmFkZHJlc3NcIiA6ICQoXCIjZW1haWwtaW5wdXRcIikudmFsKCk7XG4gICAgICAgICAgICBkYXRhUGFja2V0LmFwcGVuZCgnZW1haWwnLCBlbWFpbCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhdWRpb19ibG9iKTtcbiAgICAgICAgICAgIGRhdGFQYWNrZXQuYXBwZW5kKCdhdWRpb19uYW1lJywgbW9tZW50KCkuZm9ybWF0KCd4JykrXCJfYXVkaW8ud2F2XCIpO1xuICAgICAgICAgICAgZGF0YVBhY2tldC5hcHBlbmQoJ2F1ZGlvX2ZpbGUnLCBhdWRpb19ibG9iKTtcblxuICAgICAgICAgICAgLy8gdmFyIGRhdGFQYWNrZXQgPSB7XG4gICAgICAgICAgICAvLyAgICAgJ3RpbWVzdGFtcCc6IG1vbWVudCgpLmZvcm1hdCgnTU0vREQvWVlZWSBISDptbTpzcyBhJyksXG4gICAgICAgICAgICAvLyAgICAgJ3F1ZXN0aW9uJzogJChcIi5xdWVzdGlvbltkYXRhLXF1ZXN0aW9uPSdcIitxdWVzdGlvbl9hdHRyK1wiJ10gcC5xdWVzdGlvbi1zdHJcIikuaHRtbCgpLFxuICAgICAgICAgICAgLy8gICAgICdxdWVzdGlvbl9pZCc6IHF1ZXN0aW9uX2F0dHIuc3Vic3RyaW5nKDgsOSksXG4gICAgICAgICAgICAvLyAgICAgJ3Jlc3BvbnNlJzogJChcIiNcIitxdWVzdGlvbl9hdHRyKS52YWwoKSxcbiAgICAgICAgICAgIC8vICAgICAnc3RyZW5ndGgnOiAkKFwiI1wiK3F1ZXN0aW9uX2F0dHIrXCJfY2FyZVwiKS52YWwoKSxcbiAgICAgICAgICAgIC8vICAgICAnYXVkaW9fZmlsZSc6IGF1ZGlvX2Jsb2IsXG4gICAgICAgICAgICAvLyAgICAgJ25hbWUnOiAkKFwiI25hbWUtaW5wdXRcIikudmFsKCksXG4gICAgICAgICAgICAvLyAgICAgJ2VtYWlsJzogJChcIiNlbWFpbC1pbnB1dFwiKS52YWwoKVxuICAgICAgICAgICAgLy8gfTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YVBhY2tldCk7XG5cblxuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvc3VibWl0JyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhUGFja2V0LFxuICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2VcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgeGhyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTVUNDRVNTXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGF0YVwiLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0YXR1c1wiLCBzdGF0dXMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwieGhyXCIsIHhocik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tLVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hbHdheXMoZnVuY3Rpb24oeGhyLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNPTVBMRVRFXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RhdHVzXCIsIHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ4aHJcIiwgeGhyKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tXCIpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgIFxuICAgICAgICB9XG5cblxuICAgICAgICBpZiggJChcIi5kZWNrLW5leHRcIikuaGFzQ2xhc3MoJ2F1dG9wbGF5JykpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoICQoXCIuZGVjay1jdXJyZW50XCIpLmhhc0NsYXNzKCdhdXRvcGxheScpICl7XG4gICAgICAgICAgICAgICAgICAgICQuZGVjaygnbmV4dCcpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMjAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCAkKFwiLmRlY2stbmV4dFwiKS5oYXNDbGFzcygnZG9uZScpKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYgKCAkKFwiLmRlY2stY3VycmVudFwiKS5oYXNDbGFzcygnZG9uZScpICl7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDUyMDApO1xuICAgICAgICB9XG5cblx0fSk7XG5cblxuXG4gICAgLy90b2RvIC0gdHVybiBvZmYgYXJyb3cgbGlzdGVuZXJzIG9uIHNsaWRlc2hvd1xuICAgIC8vdG9kbyAtIGhhbW1lcmpzIHRoYXQgaXNoXG5cblxuICAgIC8vLy8vLy8vLy8vLy9cbiAgICAvLyByZWNvcmQgc3R1ZmZcbiAgICAvLy8vLy8vLy9cblxuICAgIHRyeSB7XG4gICAgICAvLyB3ZWJraXQgc2hpbVxuICAgICAgd2luZG93LkF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWE7XG4gICAgICB3aW5kb3cuVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMO1xuICAgICAgXG4gICAgICBhdWRpb19jb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dDtcblxuICAgICAgX19sb2coJ0F1ZGlvIGNvbnRleHQgc2V0IHVwLicpO1xuICAgICAgX19sb2coJ25hdmlnYXRvci5nZXRVc2VyTWVkaWEgJyArIChuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID8gJ2F2YWlsYWJsZS4nIDogJ25vdCBwcmVzZW50IScpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZTogXCIsIGUpXG4gICAgfVxuICAgIFxuICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe2F1ZGlvOiB0cnVlfSwgc3RhcnRVc2VyTWVkaWEsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBsaXZlIGF1ZGlvIGlucHV0OiAnLCBlKTtcbiAgICB9KTtcblxuXG5cblxuXG5cbiAgZnVuY3Rpb24gX19sb2coZSwgZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKGUgKyBcIiBcIiArIChkYXRhIHx8ICcnKSk7XG4gIH1cblxuICB2YXIgYXVkaW9fY29udGV4dDtcbiAgdmFyIHJlY29yZGVyO1xuICB2YXIgcmVjb3JkaW5nPWZhbHNlO1xuXG4gIGZ1bmN0aW9uIHN0YXJ0VXNlck1lZGlhKHN0cmVhbSkge1xuICAgIHZhciBpbnB1dCA9IGF1ZGlvX2NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTtcbiAgICBfX2xvZygnTWVkaWEgc3RyZWFtIGNyZWF0ZWQuJyk7XG5cbiAgICAvLyBVbmNvbW1lbnQgaWYgeW91IHdhbnQgdGhlIGF1ZGlvIHRvIGZlZWRiYWNrIGRpcmVjdGx5XG4gICAgLy9pbnB1dC5jb25uZWN0KGF1ZGlvX2NvbnRleHQuZGVzdGluYXRpb24pO1xuICAgIC8vX19sb2coJ0lucHV0IGNvbm5lY3RlZCB0byBhdWRpbyBjb250ZXh0IGRlc3RpbmF0aW9uLicpO1xuICAgIFxuICAgIHJlY29yZGVyID0gbmV3IFJlY29yZGVyKGlucHV0KTtcbiAgICBfX2xvZygnUmVjb3JkZXIgaW5pdGlhbGlzZWQuJyk7XG4gIH1cblxuZnVuY3Rpb24gdG9nZ2xlUmVjb3JkKGV2KXtcbiAgICB2YXIgYnRuID0gJChldi50YXJnZXQpO1xuICAgIHZhciBzcGFudmVyYmlhZ2UgPSAkKGV2LnRhcmdldCkucGFyZW50KCkuY2hpbGRyZW4oJ3NwYW4nKS5maXJzdCgpO1xuICAgICAgICAgaWYoYnRuLmhhc0NsYXNzKCdub3RSZWMnKSl7XG5cbiAgICAgICAgICAgICAgICAgYnRuLnJlbW92ZUNsYXNzKFwibm90UmVjXCIpO1xuICAgICAgICAgICAgICAgICBidG4uYWRkQ2xhc3MoXCJSZWNcIik7XG4gICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHJlY29yZGluZyBub3chXG4gICAgICAgICAgICAgICAgIHNwYW52ZXJiaWFnZS5odG1sKFwiU3RvcFwiKTtcbiAgICAgICAgICAgICAgICAgcmVjb3JkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgcmVjb3JkZXIgJiYgcmVjb3JkZXIucmVjb3JkKCk7XG5cbiAgICAgICAgICAgICAgICAgX19sb2coJ1JlY29yZGluZy4uLicpO1xuICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVDbGFzcyhcIlJlY1wiKTtcbiAgICAgICAgICAgICAgICAgYnRuLmFkZENsYXNzKFwibm90UmVjXCIpO1xuXG4gICAgICAgICAgICAgICAgIHNwYW52ZXJiaWFnZS5odG1sKFwiUmUtUmVjb3JkXCIpO1xuXG4gICAgICAgICAgICAgICAgICAvLyBzdG9wXG4gICAgICAgICAgICAgICAgIHJlY29yZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICByZWNvcmRlciAmJiByZWNvcmRlci5zdG9wKCk7XG5cbiAgICAgICAgICAgICAgICAgX19sb2coJ1N0b3BwZWQgcmVjb3JkaW5nLicpO1xuICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgV0FWIGRvd25sb2FkIGxpbmsgdXNpbmcgYXVkaW8gZGF0YSBibG9iXG4gICAgICAgICAgICAgICAgIHN1Ym1pdE9yUmVyZWNvcmQoKTtcblxuICAgICAgICAgICAgIH1cblxuICAgICB9XG5cbiAgLy8gIHZhciByZWNvcmRCdXR0b24gPSAkKCcucmVjb3JkZXItYnV0dG9uIGJ1dHRvbicpO1xuICAgLy8gICAvLyByZWNvcmQgYnV0dG9uIGNsaWNrZXJzXG4gICAgIC8vIHJlY29yZEJ1dHRvbi5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgIC8vICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAvLyAgICAgdmFyICRzcGFuVmVyYmlhZ2UgPSAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW4nKS5maXJzdCgpO1xuICAgICAvLyAgICAgdmFyIG1jID0gbmV3IEhhbW1lcih0aGlzKTtcbiAgICAgLy8gICAgIG1jLm9uKFwidGFwXCIsIGZ1bmN0aW9uKCkge1xuICAgICAvLyAgICAgICAgIGlmKCR0aGlzLmhhc0NsYXNzKCdub3RSZWMnKSl7XG5cbiAgICAgLy8gICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoXCJub3RSZWNcIik7XG4gICAgIC8vICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKFwiUmVjXCIpO1xuICAgICAvLyAgICAgICAgICAgICAvLyBzdGFydCByZWNvcmRpbmcgbm93IVxuICAgICAvLyAgICAgICAgICAgICAkc3BhblZlcmJpYWdlLmh0bWwoXCJTdG9wXCIpO1xuICAgICAvLyAgICAgICAgICAgICByZWNvcmRpbmcgPSB0cnVlO1xuICAgICAvLyAgICAgICAgICAgICByZWNvcmRlciAmJiByZWNvcmRlci5yZWNvcmQoKTtcblxuICAgICAvLyAgICAgICAgICAgICBfX2xvZygnUmVjb3JkaW5nLi4uJyk7XG4gICAgIC8vICAgICAgICAgfSBlbHNlIHtcbiAgICAgLy8gICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoXCJSZWNcIik7XG4gICAgIC8vICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKFwibm90UmVjXCIpO1xuXG4gICAgIC8vICAgICAgICAgICAgICRzcGFuVmVyYmlhZ2UuaHRtbChcIlJlLVJlY29yZFwiKTtcblxuICAgICAvLyAgICAgICAgICAgICAgLy8gc3RvcFxuICAgICAvLyAgICAgICAgICAgICByZWNvcmRpbmcgPSBmYWxzZTtcbiAgICAgLy8gICAgICAgICAgICAgcmVjb3JkZXIgJiYgcmVjb3JkZXIuc3RvcCgpO1xuXG4gICAgIC8vICAgICAgICAgICAgIF9fbG9nKCdTdG9wcGVkIHJlY29yZGluZy4nKTtcbiAgICAgLy8gICAgICAgICAgICAgLy8gY3JlYXRlIFdBViBkb3dubG9hZCBsaW5rIHVzaW5nIGF1ZGlvIGRhdGEgYmxvYlxuICAgICAvLyAgICAgICAgICAgICBzdWJtaXRPclJlcmVjb3JkKCk7XG5cbiAgICAgLy8gICAgICAgICB9XG4gICAgIC8vICAgICB9KTtcbiAgICAgLy8gfSk7XG5cblxuXG4gIGZ1bmN0aW9uIHN1Ym1pdE9yUmVyZWNvcmQoKSB7XG4gICAgY29uc29sZS5sb2coXCJoZXkgbWFuIVwiKTtcbiAgICBjb25zb2xlLmxvZyhyZWNvcmRlcik7XG5cbiAgICByZWNvcmRlciAmJiByZWNvcmRlci5leHBvcnRXQVYoZnVuY3Rpb24oYmxvYikge1xuICAgICAgY3VyckF1ZGlvQmxvYiA9IGJsb2I7XG4gICAgICBjb25zb2xlLmxvZyhcImF1ZGlvIGJsb2IhXCIpO1xuXG4gICAgICB2YXIgdGhpc1F1ZXN0aW9uID0gJChcIi5yZWNvcmQuZGVjay1jdXJyZW50XCIpLmF0dHIoJ2RhdGEtcXVlc3Rpb24nKTtcblxuICAgICAgdmFyIHNvdW5kX3VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoY3VyckF1ZGlvQmxvYik7XG4gICAgICB2YXIgYXVkaW9fZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgIGF1ZGlvX2VsdC5jb250cm9scyA9IHRydWU7XG4gICAgICBhdWRpb19lbHQuc3JjID0gc291bmRfdXJsO1xuICAgICAgYXVkaW9fZWx0LnNldEF0dHJpYnV0ZSgnZGF0YS1xdWVzdGlvbicsICQoXCIucmVjb3JkXCIpLmF0dHIoJ2RhdGEtcXVlc3Rpb24nKSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKHRoaXNRdWVzdGlvbik7XG4gICAgICB2YXIgY3VyclF1ZXN0aW9uc1BsYXllciA9ICQoXCIucmVjb3JkW2RhdGEtcXVlc3Rpb249J1wiK3RoaXNRdWVzdGlvbitcIiddIC5wbGF5TW9zdFJlY2VudFwiKTtcbiAgICAgIGN1cnJRdWVzdGlvbnNQbGF5ZXIuaHRtbChcIlwiKTtcbiAgICAgIGN1cnJRdWVzdGlvbnNQbGF5ZXIuYXBwZW5kKCAkKGF1ZGlvX2VsdCkgKTtcbiAgICAgLy8gY3VyclF1ZXN0aW9uc1BsYXllci5hcHBlbmQoJChhdWRpb19saW5rKSk7XG5cbiAgICAgIGN1cnJRdWVzdGlvbnNQbGF5ZXIuZmluZChcImF1ZGlvXCIpLmF0dHIoXCJkYXRhLXF1ZXN0aW9uXCIsIHRoaXNRdWVzdGlvbik7XG5cblxuICAgICAgJChcIi5kZWNrLWN1cnJlbnQucmVjb3JkIGJ1dHRvbi5uZXh0XCIpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xuXG4gICAgICAgIHJlY29yZGVyLmNsZWFyKCk7XG5cbiAgICB9KTtcbiAgfVxuXG5cblxuXG59KTsqL1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZXNvdXJjZXMvYXNzZXRzL2pzL2FwcC5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);